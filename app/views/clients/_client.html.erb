<div id="<%= dom_id client %>">

  <div class="bloc-record">
    <div data-controller="dropdown", class="">
      <div class="card-body p-0">
        <div class="row">
          <div class="col-10 text-dark">  
            <div class="text-record-main fw-bold ms-2">
              <%= highlight(client.full_name, params.dig(:q, :nom_or_prenom_or_mail_cont)) %>
            </div>
            <% if client.mail.present? %>
              <div class="badge-infos">
                <i class="fa fa-square-phone"></i>
                <%= client.tel %>
              </div>
            <% end %>
            <% if client.mail.present? %>
              <div class="badge-infos">
                <i class="fa fa-at"></i>
                <%= highlight(client.mail, params.dig(:q, :nom_or_prenom_or_mail_cont)) %>
              </div>  
            <% end %>  
            <% if client.ville.present? %>
              <div class="badge-infos">
                <i class="fa fa-location-dot"></i>
                <%= highlight(client.ville, params.dig(:q, :nom_or_prenom_or_mail_cont)) %>
              </div>  
            <% end %>  

            <div data-dropdown-target="dropdownContent">
              <% if Commande.client_courant(client).present? %>
                <div class="card card-header bg-dark mt-4 p-1">
                  Commande(s) li√©e(s)
                </div>
                <div class="card border border-dark text-dark"> 
                  <table class="table table-striped table-light table-hover", style="line-height: 0.5">
                    <% Commande.client_courant(client).each do |c| %>
                      <tr>
                        <td> <%= link_to c.texte_record, commande_path(c), class:"text-dark" %> </td>
                      </tr>
                    <% end %>
                  </table>    
                </div>
              <% end %>
            </div>

          </div>


        <div class="col-2 m-0 p-1 text-end">
          <div role="button" data-action="click->dropdown#openDropdown" 
              data-dropdown-target="openButton", class="fa-solid fa-eye btn btn-outline-primary btn-action">
          </div>
          <div role="button" data-action="click->dropdown#closeDropdown" 
            data-dropdown-target="closeButton", class="fa-solid fa-eye-slash btn btn-outline-primary btn-action">
          </div>
          <br>
  
          <%= link_to "", client_path(client), 
                class:"fa-regular fa-folder-open btn btn-success btn-action" %> 
          <%= button_to "", edit_client_path(client), 
                class:"fa-regular fa-pen-to-square btn btn-secondary btn-action", method: :post %> 
          <%= button_to '', client_path(client), 
                class:"fa-solid fa-trash-can btn btn-danger btn-action", method: :delete %> 
        </div>
      


      </div>

      </div>

    </div>
  </div>

</div>
